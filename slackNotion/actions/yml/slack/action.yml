name: "Slack Notification Action"
description: "Sends or updates a notification in Slack"
author: "roll1226"
inputs:
  SLACK_TOKEN:
    description: "The Slack OAuth token"
    required: true
  SLACK_CHANNEL:
    description: "The Slack channel ID"
    required: true
  STATUS:
    description: "The Status of the workflow"
    required: true
  RUN_ID:
    description: "The GitHub Actions run ID"
    required: true
  JOB_NAME:
    description: "The GitHub Actions job name"
    required: true
  REPOSITORY:
    description: "The GitHub Repository name"
    required: true
  REF:
    description: "The GitHub Ref"
    required: true
  EVENT_NAME:
    description: "The GitHub event name"
    required: true
  WORKFLOW:
    description: "The GitHub Workflow name"
    required: true
  SLACK_THREAD_TS:
    description: "The Slack Message Timestamp"
    required: false
runs:
  using: "composite"
  outputs:
    SLACK_THREAD_TS:
      description: "Slack Timestamp"
  steps:
    - name: Run Script
      run: cd slackNotion && npm run start
      shell: bash
      env:
        SLACK_TOKEN: ${{ inputs.SLACK_TOKEN }}
        SLACK_CHANNEL: ${{ inputs.SLACK_CHANNEL }}
        STATUS: ${{ inputs.STATUS }}
        RUN_ID: ${{ inputs.RUN_ID }}
        JOB_NAME: ${{ inputs.JOB_NAME }}
        REPOSITORY: ${{ inputs.REPOSITORY }}
        REF: ${{ inputs.REF }}
        EVENT_NAME: ${{ inputs.EVENT_NAME }}
        WORKFLOW: ${{ inputs.WORKFLOW }}
        SLACK_THREAD_TS: ${{ inputs.SLACK_THREAD_TS }}
